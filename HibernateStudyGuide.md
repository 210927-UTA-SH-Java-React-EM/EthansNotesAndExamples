# Hibernate

## Should be in notes, or quick research

1.  What is Hibernate? What is JPA?

    Hibernate is an ORM solution for java that extends the interface JPA.
    
    JPA (Java Persistence API) is the standard way for a Java application to interact with and convert relational database object to and from Java objects.   
    
2.  What is the benefit of using Hibernate over JDBC?

    Hibernate provides caching mechanisms to cutdown on database fetching. Hibernate is database independent. Using hibernate reduces boilerplate code. Hibernate is easy to scale. Hibernate is a set of objects, so, a developer doesn't need to focus on or know the SQL well.

3.  Tell me about some of the JPA annotations you have worked with? What do they do? How do you specify multiplicity relationships with JPA annotations?

    @Entity - is used to identify a table to persist.
    @Table(name="") - is used to link a Java object to a database table
    @Id - is used to identify an index for the object to persist
    @ManyToMany - Indetify multiplicity describing cardinality between two tables
    @JoinTable - Needed in a manytomany - join two tables using a foreign key
    
4.  What are the interfaces of Hibernate?
    SessionFactory - Holds L2 cache - creates the session - immutable for a single database
    Session - L1 cache - Wraps the jdbc connection - provides CRUD methods
    Configuration - configures the database
    Criteria - Query by object oriented specifications - same as HQL (Hibernate Query Language) 
    Query - Used to query with sql in hibernate - you can use query to write a native SQL query
    (Optional) Transaction - Handle rollbacks, commits, open, close - TCL essentially (Transaction Control Language)
    
5.  Tell me how you set up hibernate? What files are you editing, what goes in them, etc.
    You use the hibernate.cfg.xml file to set hibernate configuation 
    
    some properties: (username, password, dialect, driver, url, ddl-auto, etc...)
    
6.  What ways are available to you to map an object to database entities in Hibernate?

    Use the annotations directly above the object. Example:
    @Entity
    class User {}

    ...or using xml files to map the objects using xml.
    
7.  In the session interface, what is the difference between save and persist methods? get and load methods? Update vs merge methods?

    Save vs persist - persist return type is void, save return type is the primary key value generated by hibernate. persist will not be exectued if called outside of transaction boundaries, save will be executed even if called outside of transaction boundaries.

    Update vs merge - update is faster than merge - with merge, you need to check if a detached object was changed from its previous persisted value in the database... with update, there is no check

    get vs load - load throws and exception if no objects are exist to return; get returns a null.  
    
8.  What are the different session methods?

    beginTransaction() - begin a unit of work, and return the associated transaction object 
    save() -  persist the given transient instance, first assigning a generated identifier - stores the object
    update() -  update the persistent instance with the identifier of the given detached instance - updates the db record
    saveOrUpdate() - either save or update the given instance depending on the resolution of the unsaved value checks
    createQuery() - creates a new instance of query for the given HQL query string
    createSQLQuery() - creates a new instance of SQL query for the given HQL query string
    merge() - copy the state of the given object onto the persistent object with the same identifier
    persist() - make a transient instance persistent
    flush() - force the session to flush - must be called at the end of a unit of work - before committing the transaction and closing the session
    delete() - remove a persisent instance from the data store 
    
9.  What is the difference between Eager and Lazy fetching and how to setup either?

    Lazy doesn't load until it needs to or is requested. Eager loads as soon as the application code executes - with lazy loading, we can avoid loading unused data vs eager loading minimizes trips to the database
    
11.  What are the 4 ways to make a query using Hibernate?

    HQL
    NativeSQL
    Criteria API


12.  What is HQL? What makes it different from SQL?

    Hibernate Query Language - SQL directly operates on the database objects through queries, HQL operates on objects and properties which is then translated into a specific dialect of SQL to act upon the relational database
    
14.  What is caching? What is the difference between L1 and L2 cache?

    Caching is local mechanism to enhance the performance of a system. - Hibernate caching acts as a layer between the actual database and the application - reduces the time taken to obtain the required data

    L1 is the first place hibernate looks for data to try to save database trips

    L2 is optional cache belonging to SessionFactory - much larger - all sessions share

15.  How do you enable second level caching?
    
16.  Tell me about NamedQueries.
    
17.  Can you write native SQL with Hibernate? Is this a good idea?
    
18.  What are the configuration options for Hibernate?
    
*  How to specify the SQL dialect?
    
*  What data must be specified for the SessionFactory?
    
*  What is hbm2ddl?
    
19.  How would you configure Hibernate to print to the console all SQL statements run?
    
20.  What are the different object states in Hibernate? What methods move objects to different states?

## Extra Research Required

10.  Under what circumstances would your program throw a LazyInitializationException?

13.  What is the Criteria API? Can you perform all DDL and DML commands with it? How do Restrictions and Projections work within this API?

21.  What is a proxy? When does the proxy resolve to the real object?

22.  What is the difference between Dynamic Insert and Dynamic Update?

23.  What is automatic dirty checking?
    
24.  What is Transactional Write Behind?
    
25.  Explain how transaction propagation works